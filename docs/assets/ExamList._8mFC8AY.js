import{d as se,f as A,g,c as p,a as l,w as t,r as i,b as c,e as m,h as J,t as _,F as E,i as S,E as ie,j as h,o as u,k}from"./index.BKGInAL0.js";import{_ as ue}from"./_plugin-vue_export-helper.DlAUqK2U.js";const de={class:"exam-list"},re={class:"header-content"},me={class:"exam-content"},pe={class:"exam-info"},ce={key:0,class:"timer"},_e={key:0,class:"questions"},ve={key:0,class:"options"},fe={class:"dialog-footer"},be={class:"question-list"},ye={class:"question-header"},Ve={class:"dialog-footer"},ge=se({__name:"ExamList",setup(ke){const f=A([{id:1,name:"Java基础考试",duration:"120分钟",startTime:"2024-03-22 10:00",endTime:"2024-03-22 12:00",questions:[{title:"Java中的基本数据类型有哪些？",type:"multiple",options:[{label:"byte",value:"A"},{label:"short",value:"B"},{label:"int",value:"C"},{label:"long",value:"D"},{label:"string",value:"E"}]},{title:"以下哪个不是Java的特性？",type:"single",options:[{label:"封装",value:"A"},{label:"继承",value:"B"},{label:"多态",value:"C"},{label:"指针",value:"D"}]},{title:"简述Java中的多态是什么？请举例说明。",type:"text"}]},{id:2,name:"数据库设计考试",duration:"90分钟",startTime:"2024-03-23 14:00",endTime:"2024-03-23 15:30",questions:[{title:"数据库的三大范式是什么？",type:"text"},{title:"以下哪些是关系型数据库？",type:"multiple",options:[{label:"MySQL",value:"A"},{label:"MongoDB",value:"B"},{label:"PostgreSQL",value:"C"},{label:"Redis",value:"D"}]}]}]),B=g(!1),V=g(!1),C=g(!1),x=g({}),b=g([]),T=g(0),n=A({id:0,name:"",duration:"",startTime:"",endTime:"",questions:[]}),M=()=>{C.value=!1,Object.assign(n,{id:0,name:"",duration:"",startTime:"",endTime:"",questions:[]}),V.value=!0},Q=o=>{C.value=!0,Object.assign(n,JSON.parse(JSON.stringify(o))),V.value=!0},j=o=>{ie.confirm("确定要删除这个考试吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=f.findIndex(d=>d.id===o.id);e!==-1&&(f.splice(e,1),h.success("删除成功"))})},F=()=>{n.questions.push({title:"",type:"single",options:[{label:"",value:"A"},{label:"",value:"B"},{label:"",value:"C"},{label:"",value:"D"}]})},I=o=>{n.questions.splice(o,1)},P=o=>{o.options||(o.options=[]),o.options.push({label:"",value:String.fromCharCode(65+o.options.length)})},R=(o,e)=>{o.options&&o.options.splice(e,1)},G=()=>{if(!n.name||!n.duration||!n.startTime||!n.endTime){h.warning("请填写完整的考试信息");return}if(n.questions.length===0){h.warning("请至少添加一道题目");return}if(C.value){const o=f.findIndex(e=>e.id===n.id);o!==-1&&(f[o]=JSON.parse(JSON.stringify(n)))}else n.id=f.length+1,f.push(JSON.parse(JSON.stringify(n)));V.value=!1,h.success(C.value?"编辑成功":"创建成功")},H=o=>{x.value=o,b.value=new Array(o.questions.length),B.value=!0,T.value=5*60,K()},K=()=>{const o=setInterval(()=>{T.value>0?T.value--:(clearInterval(o),O())},1e3)},W=o=>{const e=Math.floor(o/60),d=o%60;return`${e}:${d.toString().padStart(2,"0")}`},O=()=>{h.success("考试提交成功！"),B.value=!1};return(o,e)=>{const d=i("el-button"),X=i("el-header"),w=i("el-table-column"),Y=i("el-table"),Z=i("el-radio"),q=i("el-radio-group"),ee=i("el-checkbox"),le=i("el-checkbox-group"),U=i("el-input"),D=i("el-dialog"),v=i("el-form-item"),$=i("el-date-picker"),N=i("el-option"),te=i("el-select"),z=i("el-form"),ae=i("el-card"),oe=i("el-main"),ne=i("el-container");return u(),p("div",de,[l(ne,null,{default:t(()=>[l(X,null,{default:t(()=>[c("div",re,[e[8]||(e[8]=c("h2",null,"考试列表",-1)),l(d,{type:"primary",onClick:M},{default:t(()=>e[7]||(e[7]=[m("创建考试")])),_:1})])]),_:1}),l(oe,null,{default:t(()=>[l(Y,{data:f,style:{width:"100%"}},{default:t(()=>[l(w,{prop:"name",label:"考试名称"}),l(w,{prop:"duration",label:"考试时长"}),l(w,{prop:"startTime",label:"开始时间"}),l(w,{prop:"endTime",label:"结束时间"}),l(w,{label:"操作",width:"250"},{default:t(a=>[l(d,{type:"primary",size:"small",onClick:r=>H(a.row)},{default:t(()=>e[9]||(e[9]=[m("开始考试")])),_:2},1032,["onClick"]),l(d,{type:"warning",size:"small",onClick:r=>Q(a.row)},{default:t(()=>e[10]||(e[10]=[m("编辑")])),_:2},1032,["onClick"]),l(d,{type:"danger",size:"small",onClick:r=>j(a.row)},{default:t(()=>e[11]||(e[11]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(D,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=a=>B.value=a),title:"在线考试",width:"80%","close-on-click-modal":!1},{footer:t(()=>[c("span",fe,[l(d,{type:"primary",onClick:O},{default:t(()=>e[12]||(e[12]=[m("提交试卷")])),_:1})])]),default:t(()=>[c("div",me,[c("div",pe,[c("h3",null,_(x.value.name),1),c("p",null,"考试时长："+_(x.value.duration),1),T.value?(u(),p("div",ce,"剩余时间："+_(W(T.value)),1)):J("",!0)]),x.value.questions?(u(),p("div",_e,[(u(!0),p(E,null,S(x.value.questions,(a,r)=>(u(),p("div",{key:r,class:"question-item"},[c("h4",null,_(r+1)+". "+_(a.title),1),a.type==="single"||a.type==="multiple"?(u(),p("div",ve,[a.type==="single"?(u(),k(q,{key:0,modelValue:b.value[r],"onUpdate:modelValue":s=>b.value[r]=s},{default:t(()=>[(u(!0),p(E,null,S(a.options,(s,y)=>(u(),k(Z,{key:y,label:s.value},{default:t(()=>[m(_(s.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(u(),k(le,{key:1,modelValue:b.value[r],"onUpdate:modelValue":s=>b.value[r]=s},{default:t(()=>[(u(!0),p(E,null,S(a.options,(s,y)=>(u(),k(ee,{key:y,label:s.value},{default:t(()=>[m(_(s.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]))])):a.type==="text"?(u(),k(U,{key:1,type:"textarea",modelValue:b.value[r],"onUpdate:modelValue":s=>b.value[r]=s,rows:4,placeholder:"请输入答案"},null,8,["modelValue","onUpdate:modelValue"])):J("",!0)]))),128))])):J("",!0)])]),_:1},8,["modelValue"]),l(D,{modelValue:V.value,"onUpdate:modelValue":e[6]||(e[6]=a=>V.value=a),title:C.value?"编辑考试":"创建考试",width:"60%"},{footer:t(()=>[c("span",Ve,[l(d,{onClick:e[5]||(e[5]=a=>V.value=!1)},{default:t(()=>e[17]||(e[17]=[m("取消")])),_:1}),l(d,{type:"primary",onClick:G},{default:t(()=>e[18]||(e[18]=[m("保存")])),_:1})])]),default:t(()=>[l(z,{model:n,"label-width":"100px"},{default:t(()=>[l(v,{label:"考试名称"},{default:t(()=>[l(U,{modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=a=>n.name=a),placeholder:"请输入考试名称"},null,8,["modelValue"])]),_:1}),l(v,{label:"考试时长"},{default:t(()=>[l(U,{modelValue:n.duration,"onUpdate:modelValue":e[2]||(e[2]=a=>n.duration=a),placeholder:"请输入考试时长（如：120分钟）"},null,8,["modelValue"])]),_:1}),l(v,{label:"开始时间"},{default:t(()=>[l($,{modelValue:n.startTime,"onUpdate:modelValue":e[3]||(e[3]=a=>n.startTime=a),type:"datetime",placeholder:"选择开始时间"},null,8,["modelValue"])]),_:1}),l(v,{label:"结束时间"},{default:t(()=>[l($,{modelValue:n.endTime,"onUpdate:modelValue":e[4]||(e[4]=a=>n.endTime=a),type:"datetime",placeholder:"选择结束时间"},null,8,["modelValue"])]),_:1}),l(v,{label:"考试题目"},{default:t(()=>[c("div",be,[(u(!0),p(E,null,S(n.questions,(a,r)=>(u(),p("div",{key:r,class:"question-edit-item"},[l(ae,null,{header:t(()=>[c("div",ye,[c("span",null,"题目 "+_(r+1),1),l(d,{type:"danger",size:"small",onClick:s=>I(r)},{default:t(()=>e[13]||(e[13]=[m("删除")])),_:2},1032,["onClick"])])]),default:t(()=>[l(z,{model:a},{default:t(()=>[l(v,{label:"题目"},{default:t(()=>[l(U,{modelValue:a.title,"onUpdate:modelValue":s=>a.title=s,type:"textarea",rows:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(v,{label:"题型"},{default:t(()=>[l(te,{modelValue:a.type,"onUpdate:modelValue":s=>a.type=s,placeholder:"请选择题型"},{default:t(()=>[l(N,{label:"单选题",value:"single"}),l(N,{label:"多选题",value:"multiple"}),l(N,{label:"简答题",value:"text"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),a.type==="single"||a.type==="multiple"?(u(),k(v,{key:0,label:"选项"},{default:t(()=>[(u(!0),p(E,null,S(a.options,(s,y)=>(u(),p("div",{key:y,class:"option-item"},[l(U,{modelValue:s.label,"onUpdate:modelValue":L=>s.label=L,placeholder:"选项内容"},{prepend:t(()=>[m(_(String.fromCharCode(65+y)),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(d,{type:"danger",size:"small",onClick:L=>R(a,y)},{default:t(()=>e[14]||(e[14]=[m("删除")])),_:2},1032,["onClick"])]))),128)),l(d,{type:"primary",size:"small",onClick:s=>P(a)},{default:t(()=>e[15]||(e[15]=[m("添加选项")])),_:2},1032,["onClick"])]),_:2},1024)):J("",!0)]),_:2},1032,["model"])]),_:2},1024)]))),128)),l(d,{type:"primary",onClick:F},{default:t(()=>e[16]||(e[16]=[m("添加题目")])),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})]),_:1})])}}}),Te=ue(ge,[["__scopeId","data-v-066ec3fe"]]);export{Te as default};
